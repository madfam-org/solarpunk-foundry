# =============================================================================
# MADFAM ECOSYSTEM - PRODUCTION ENVIRONMENT TEMPLATE
# =============================================================================
# Copy this file to .env.production and fill in all values
# DO NOT commit .env.production to version control
# =============================================================================

# -----------------------------------------------------------------------------
# SHARED INFRASTRUCTURE
# -----------------------------------------------------------------------------

# PostgreSQL (Shared across all services)
POSTGRES_HOST=madfam-postgres-shared
POSTGRES_PORT=5432
POSTGRES_USER=madfam
POSTGRES_PASSWORD=__CHANGE_ME_STRONG_PASSWORD__
POSTGRES_SSL_MODE=require

# Individual database names
JANUA_DB_NAME=janua_db
FORGESIGHT_DB_NAME=forgesight_db
COTIZA_DB_NAME=cotiza_db
MADFAM_SITE_DB_NAME=madfam_site_db

# Redis (Shared across all services)
REDIS_HOST=madfam-redis-shared
REDIS_PORT=6379
REDIS_PASSWORD=__CHANGE_ME_REDIS_PASSWORD__

# MinIO / S3 Storage
MINIO_ENDPOINT=madfam-minio-shared:9000
MINIO_ROOT_USER=__CHANGE_ME_MINIO_USER__
MINIO_ROOT_PASSWORD=__CHANGE_ME_MINIO_PASSWORD__
MINIO_USE_SSL=true

# -----------------------------------------------------------------------------
# JANUA - Authentication Infrastructure (Port 8001)
# -----------------------------------------------------------------------------
JANUA_PORT=8001
JANUA_DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${JANUA_DB_NAME}?sslmode=${POSTGRES_SSL_MODE}
JANUA_REDIS_URL=redis://:${REDIS_PASSWORD}@${REDIS_HOST}:${REDIS_PORT}/0

# JWT Configuration
JANUA_JWT_SECRET=__CHANGE_ME_JWT_SECRET_MIN_32_CHARS__
JANUA_JWT_EXPIRY=3600
JANUA_REFRESH_TOKEN_EXPIRY=604800

# OAuth Providers (optional)
JANUA_GOOGLE_CLIENT_ID=
JANUA_GOOGLE_CLIENT_SECRET=
JANUA_GITHUB_CLIENT_ID=
JANUA_GITHUB_CLIENT_SECRET=

# -----------------------------------------------------------------------------
# FORGESIGHT - Vendor Intelligence (Port 8100)
# -----------------------------------------------------------------------------
FORGESIGHT_PORT=8100
FORGESIGHT_DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${FORGESIGHT_DB_NAME}?sslmode=${POSTGRES_SSL_MODE}
FORGESIGHT_REDIS_URL=redis://:${REDIS_PASSWORD}@${REDIS_HOST}:${REDIS_PORT}/1

# OpenSearch
OPENSEARCH_HOST=forgesight-opensearch
OPENSEARCH_PORT=9200
OPENSEARCH_USER=admin
OPENSEARCH_PASSWORD=__CHANGE_ME_OPENSEARCH_PASSWORD__

# API Keys for vendor data sources
FORGESIGHT_API_KEY=__CHANGE_ME_FORGESIGHT_API_KEY__

# -----------------------------------------------------------------------------
# COTIZA - Quoting Engine (Port 8200)
# -----------------------------------------------------------------------------
COTIZA_API_PORT=8200
COTIZA_WEB_PORT=3030
COTIZA_DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${COTIZA_DB_NAME}?sslmode=${POSTGRES_SSL_MODE}
COTIZA_REDIS_URL=redis://:${REDIS_PASSWORD}@${REDIS_HOST}:${REDIS_PORT}/2

# Stripe Integration
STRIPE_SECRET_KEY=__CHANGE_ME_STRIPE_SECRET__
STRIPE_WEBHOOK_SECRET=__CHANGE_ME_STRIPE_WEBHOOK__
STRIPE_PUBLISHABLE_KEY=__CHANGE_ME_STRIPE_PUBLISHABLE__

# S3/MinIO for file storage
COTIZA_S3_BUCKET=cotiza-production
COTIZA_S3_REGION=us-east-1

# Email (SMTP)
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM=noreply@yourdomain.com

# -----------------------------------------------------------------------------
# MADFAM SITE - Marketing Website (Port 3000)
# -----------------------------------------------------------------------------
MADFAM_SITE_PORT=3000
MADFAM_SITE_DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${MADFAM_SITE_DB_NAME}?sslmode=${POSTGRES_SSL_MODE}

# NextAuth
NEXTAUTH_SECRET=__CHANGE_ME_NEXTAUTH_SECRET__
NEXTAUTH_URL=https://yourdomain.com

# Service URLs (internal Docker network)
JANUA_API_URL=http://janua-api:8001
FORGESIGHT_API_URL=http://forgesight-api:8100
COTIZA_API_URL=http://cotiza-api:8200

# -----------------------------------------------------------------------------
# MONITORING & LOGGING
# -----------------------------------------------------------------------------
LOG_LEVEL=info
SENTRY_DSN=
NEW_RELIC_LICENSE_KEY=

# -----------------------------------------------------------------------------
# SECURITY
# -----------------------------------------------------------------------------
CORS_ORIGINS=https://yourdomain.com,https://app.yourdomain.com
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# -----------------------------------------------------------------------------
# DEPLOYMENT
# -----------------------------------------------------------------------------
NODE_ENV=production
DOCKER_REGISTRY=your-registry.com
IMAGE_TAG=latest
