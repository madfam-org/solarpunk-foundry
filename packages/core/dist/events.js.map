{"version":3,"sources":["../src/events.ts"],"names":[],"mappings":";AAoBO,IAAM,kBAAkB;AAAA,EAC7B;AAAA;AAAA,EACA;AAAA;AAAA,EACA;AAAA;AAAA,EACA;AAAA;AAAA,EACA;AAAA;AAAA,EACA;AAAA;AAAA,EACA;AAAA;AAAA,EACA;AAAA;AACF;AAkOO,IAAM,kBAAkB;AAAA;AAAA,EAE7B,kBAAkB,CAAC;AAAA,EACnB,kBAAkB,CAAC;AAAA,EACnB,mBAAmB,CAAC;AAAA,EACpB,iBAAiB,CAAC;AAAA;AAAA,EAGlB,kBAAkB,CAAC;AAAA,EACnB,yBAAyB,CAAC;AAAA,EAC1B,oBAAoB,CAAC;AAAA,EACrB,oBAAoB,CAAC;AAAA;AAAA,EAGrB,eAAe,CAAC;AAAA,EAChB,gBAAgB,CAAC;AAAA,EACjB,kBAAkB,CAAC;AAAA,EACnB,oBAAoB,CAAC;AAAA;AAAA,EAGrB,iBAAiB,CAAC;AAAA,EAClB,kBAAkB,CAAC;AAAA,EACnB,mBAAmB,CAAC;AAAA,EACpB,sBAAsB,CAAC;AAAA;AAAA,EAGvB,kBAAkB,CAAC;AAAA;AAAA,EAGnB,sBAAsB,CAAC;AACzB","sourcesContent":["/**\n * @solarpunk/core - Analytics Event Taxonomy\n *\n * Authoritative analytics event schema for cross-ecosystem tracking.\n * This defines the STRUCTURE of events, not the implementation.\n * Apps own their tracking implementation but MUST use these event names\n * for ecosystem-wide analytics to work.\n *\n * Changes to this file require governance approval.\n */\n\nimport type { ProductId } from './products';\n\n// ═══════════════════════════════════════════════════════════════════════════════\n// EVENT CATEGORIES\n// ═══════════════════════════════════════════════════════════════════════════════\n\n/**\n * Event categories for organization and filtering\n */\nexport const eventCategories = [\n  'user',       // User lifecycle events\n  'auth',       // Authentication events\n  'navigation', // Page/screen navigation\n  'engagement', // User engagement with content\n  'conversion', // Business conversion events\n  'error',      // Error tracking\n  'feature',    // Feature usage tracking\n  'feedback',   // User feedback events\n] as const;\n\nexport type EventCategory = (typeof eventCategories)[number];\n\n// ═══════════════════════════════════════════════════════════════════════════════\n// BASE EVENT PROPERTIES\n// ═══════════════════════════════════════════════════════════════════════════════\n\n/**\n * Properties that MUST be included with every event\n */\nexport interface BaseEventProps {\n  /** Which app triggered the event */\n  app: ProductId;\n  /** Timestamp (ISO 8601) */\n  timestamp?: string;\n  /** Session ID for journey tracking */\n  sessionId?: string;\n  /** User ID (if authenticated) */\n  userId?: string;\n}\n\n// ═══════════════════════════════════════════════════════════════════════════════\n// USER LIFECYCLE EVENTS\n// ═══════════════════════════════════════════════════════════════════════════════\n\nexport interface UserSignedUpProps extends BaseEventProps {\n  /** Where the user came from */\n  source: 'organic' | 'referral' | 'campaign' | 'social' | 'direct';\n  /** Referral code if applicable */\n  referralCode?: string;\n  /** Campaign ID if from marketing */\n  campaignId?: string;\n}\n\nexport interface UserSignedInProps extends BaseEventProps {\n  /** Authentication method used */\n  method: 'password' | 'magic_link' | 'oauth_google' | 'oauth_github' | 'passkey' | 'mfa';\n}\n\nexport interface UserSignedOutProps extends BaseEventProps {\n  /** Reason for sign out */\n  reason?: 'manual' | 'session_expired' | 'forced';\n}\n\nexport interface UserUpgradedProps extends BaseEventProps {\n  /** Previous plan */\n  fromPlan: string;\n  /** New plan */\n  toPlan: string;\n  /** Monthly recurring revenue change */\n  mrrChange?: number;\n}\n\n// ═══════════════════════════════════════════════════════════════════════════════\n// CONVERSION FUNNEL EVENTS\n// ═══════════════════════════════════════════════════════════════════════════════\n\nexport interface FunnelStartedProps extends BaseEventProps {\n  /** Funnel identifier */\n  funnelName: string;\n  /** Entry point */\n  entryPoint: string;\n}\n\nexport interface FunnelStepCompletedProps extends BaseEventProps {\n  /** Funnel identifier */\n  funnelName: string;\n  /** Step number (1-indexed) */\n  step: number;\n  /** Step name */\n  stepName: string;\n  /** Time spent on previous step (ms) */\n  timeOnStep?: number;\n}\n\nexport interface FunnelConvertedProps extends BaseEventProps {\n  /** Funnel identifier */\n  funnelName: string;\n  /** Total steps completed */\n  stepsCompleted: number;\n  /** Conversion value */\n  value?: number;\n  /** Currency of value */\n  currency?: string;\n}\n\nexport interface FunnelAbandonedProps extends BaseEventProps {\n  /** Funnel identifier */\n  funnelName: string;\n  /** Step where user abandoned */\n  abandonedAtStep: number;\n  /** Reason if known */\n  reason?: string;\n}\n\n// ═══════════════════════════════════════════════════════════════════════════════\n// ENGAGEMENT EVENTS\n// ═══════════════════════════════════════════════════════════════════════════════\n\nexport interface PageViewedProps extends BaseEventProps {\n  /** Page path */\n  path: string;\n  /** Page title */\n  title?: string;\n  /** Referrer */\n  referrer?: string;\n}\n\nexport interface FeatureUsedProps extends BaseEventProps {\n  /** Feature identifier */\n  feature: string;\n  /** Action taken */\n  action: 'viewed' | 'started' | 'completed' | 'dismissed';\n  /** Additional context */\n  context?: Record<string, string>;\n}\n\nexport interface ContentViewedProps extends BaseEventProps {\n  /** Content type */\n  contentType: 'article' | 'video' | 'case_study' | 'documentation' | 'tutorial';\n  /** Content identifier */\n  contentId: string;\n  /** Content title */\n  title: string;\n  /** View duration (seconds) */\n  duration?: number;\n  /** Completion percentage (0-100) */\n  completionPercent?: number;\n}\n\nexport interface SearchPerformedProps extends BaseEventProps {\n  /** Search query */\n  query: string;\n  /** Number of results */\n  resultsCount: number;\n  /** Search category/scope */\n  category?: string;\n}\n\n// ═══════════════════════════════════════════════════════════════════════════════\n// BUSINESS EVENTS\n// ═══════════════════════════════════════════════════════════════════════════════\n\nexport interface LeadCapturedProps extends BaseEventProps {\n  /** Lead source */\n  source: string;\n  /** Form identifier */\n  form: string;\n  /** Lead quality score (if calculated) */\n  score?: number;\n  /** Tier of interest */\n  tier?: string;\n}\n\nexport interface DemoRequestedProps extends BaseEventProps {\n  /** Product of interest */\n  product: ProductId;\n  /** Requested demo type */\n  demoType?: 'live' | 'recorded' | 'self_guided';\n}\n\nexport interface QuoteRequestedProps extends BaseEventProps {\n  /** Service/product category */\n  category: string;\n  /** Estimated value */\n  estimatedValue?: number;\n  /** Currency */\n  currency?: string;\n}\n\nexport interface PurchaseCompletedProps extends BaseEventProps {\n  /** Order/transaction ID */\n  transactionId: string;\n  /** Product(s) purchased */\n  products: Array<{ id: string; name: string; quantity: number; price: number }>;\n  /** Total value */\n  totalValue: number;\n  /** Currency */\n  currency: string;\n  /** Payment method */\n  paymentMethod?: string;\n}\n\n// ═══════════════════════════════════════════════════════════════════════════════\n// ERROR EVENTS\n// ═══════════════════════════════════════════════════════════════════════════════\n\nexport interface ErrorOccurredProps extends BaseEventProps {\n  /** Error code or type */\n  errorCode: string;\n  /** Error message (sanitized - no PII) */\n  message: string;\n  /** Severity level */\n  severity: 'low' | 'medium' | 'high' | 'critical';\n  /** Where the error occurred */\n  context: string;\n  /** Stack trace (truncated, no PII) */\n  stack?: string;\n}\n\n// ═══════════════════════════════════════════════════════════════════════════════\n// FEEDBACK EVENTS\n// ═══════════════════════════════════════════════════════════════════════════════\n\nexport interface FeedbackSubmittedProps extends BaseEventProps {\n  /** Feedback type */\n  type: 'bug' | 'feature_request' | 'general' | 'complaint' | 'praise';\n  /** Rating (1-5) if applicable */\n  rating?: number;\n  /** NPS score (0-10) if applicable */\n  npsScore?: number;\n  /** Category */\n  category?: string;\n}\n\n// ═══════════════════════════════════════════════════════════════════════════════\n// EVENT REGISTRY\n// ═══════════════════════════════════════════════════════════════════════════════\n\n/**\n * Complete event taxonomy with required properties\n *\n * This is the authoritative list of events that can be tracked\n * across the ecosystem. Apps MUST use these event names.\n */\nexport const analyticsEvents = {\n  // User lifecycle\n  'user.signed_up': {} as UserSignedUpProps,\n  'user.signed_in': {} as UserSignedInProps,\n  'user.signed_out': {} as UserSignedOutProps,\n  'user.upgraded': {} as UserUpgradedProps,\n\n  // Conversion funnel\n  'funnel.started': {} as FunnelStartedProps,\n  'funnel.step_completed': {} as FunnelStepCompletedProps,\n  'funnel.converted': {} as FunnelConvertedProps,\n  'funnel.abandoned': {} as FunnelAbandonedProps,\n\n  // Engagement\n  'page.viewed': {} as PageViewedProps,\n  'feature.used': {} as FeatureUsedProps,\n  'content.viewed': {} as ContentViewedProps,\n  'search.performed': {} as SearchPerformedProps,\n\n  // Business\n  'lead.captured': {} as LeadCapturedProps,\n  'demo.requested': {} as DemoRequestedProps,\n  'quote.requested': {} as QuoteRequestedProps,\n  'purchase.completed': {} as PurchaseCompletedProps,\n\n  // Error\n  'error.occurred': {} as ErrorOccurredProps,\n\n  // Feedback\n  'feedback.submitted': {} as FeedbackSubmittedProps,\n} as const;\n\n/**\n * Event name type derived from registry\n */\nexport type AnalyticsEventName = keyof typeof analyticsEvents;\n\n/**\n * Get the props type for a specific event\n */\nexport type EventProps<T extends AnalyticsEventName> = (typeof analyticsEvents)[T];\n\n/**\n * Type-safe event helper\n */\nexport type AnalyticsEvent<T extends AnalyticsEventName = AnalyticsEventName> = {\n  name: T;\n  props: EventProps<T>;\n};\n"]}