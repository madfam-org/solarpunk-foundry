{"version":3,"sources":["../src/currencies.ts"],"names":[],"mappings":";AAiBO,IAAM,aAAa,CAAC,OAAO,OAAO,KAAK;AAUvC,IAAM,kBAA4B;AAKlC,IAAM,mBAA6B;AAqBnC,IAAM,mBAAuD;AAAA,EAClE,KAAK;AAAA,IACH,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,MAAM;AAAA,IACN,UAAU;AAAA,IACV,gBAAgB;AAAA,IAChB,SAAS,CAAC,OAAO;AAAA,EACnB;AAAA,EACA,KAAK;AAAA,IACH,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,MAAM;AAAA,IACN,UAAU;AAAA,IACV,gBAAgB;AAAA,IAChB,SAAS,CAAC,OAAO;AAAA,EACnB;AAAA,EACA,KAAK;AAAA,IACH,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,MAAM;AAAA,IACN,UAAU;AAAA,IACV,gBAAgB;AAAA,IAChB,SAAS,CAAC,SAAS,OAAO;AAAA,EAC5B;AACF;AASO,SAAS,gBAAgB,OAAkC;AAChE,SAAO,WAAW,SAAS,KAAiB;AAC9C;AAKO,SAAS,cAAc,OAA4C;AACxE,MAAI,SAAS,gBAAgB,KAAK,GAAG;AACnC,WAAO;AAAA,EACT;AACA,SAAO;AACT;AAKO,SAAS,oBAAoB,UAAoC;AACtE,QAAM,gBAAgB,cAAc,QAAQ;AAC5C,SAAO,iBAAiB,aAAa;AACvC;AAKO,SAAS,eACd,QACA,UACA,SACQ;AACR,QAAM,OAAO,iBAAiB,QAAQ;AACtC,QAAM,YAAY,OAAO,QAAQ,KAAK,QAAQ;AAC9C,QAAM,QAAQ,UAAU,MAAM,GAAG;AAGjC,QAAM,cAAc,MAAM,CAAC,EAAE,QAAQ,yBAAyB,GAAG;AACjE,QAAM,cAAc,MAAM,CAAC;AAE3B,QAAM,SAAS,GAAG,WAAW,IAAI,WAAW;AAE5C,MAAI;AACJ,MAAI,KAAK,mBAAmB,UAAU;AACpC,aAAS,GAAG,KAAK,MAAM,GAAG,MAAM;AAAA,EAClC,OAAO;AACL,aAAS,GAAG,MAAM,GAAG,KAAK,MAAM;AAAA,EAClC;AAEA,MAAI,SAAS,UAAU;AACrB,aAAS,GAAG,MAAM,IAAI,QAAQ;AAAA,EAChC;AAEA,SAAO;AACT","sourcesContent":["/**\n * @solarpunk/core - Currencies\n *\n * Authoritative currency constants for the ecosystem.\n * These define which currencies are officially supported for transactions.\n *\n * Changes to this file require governance approval.\n */\n\n// ═══════════════════════════════════════════════════════════════════════════════\n// SUPPORTED CURRENCIES\n// ═══════════════════════════════════════════════════════════════════════════════\n\n/**\n * Officially supported currencies across the ecosystem.\n * Apps handling payments MUST support at least the default currency.\n */\nexport const currencies = ['MXN', 'USD', 'EUR'] as const;\n\n/**\n * Currency type derived from supported currencies\n */\nexport type Currency = (typeof currencies)[number];\n\n/**\n * Default currency for the ecosystem (Mexican Peso - home market)\n */\nexport const defaultCurrency: Currency = 'MXN';\n\n/**\n * Fallback currency for international contexts\n */\nexport const fallbackCurrency: Currency = 'USD';\n\n// ═══════════════════════════════════════════════════════════════════════════════\n// CURRENCY METADATA\n// ═══════════════════════════════════════════════════════════════════════════════\n\nexport interface CurrencyMetadata {\n  /** ISO 4217 code */\n  code: Currency;\n  /** Currency symbol */\n  symbol: string;\n  /** Full name */\n  name: string;\n  /** Decimal places for display */\n  decimals: number;\n  /** Symbol position */\n  symbolPosition: 'before' | 'after';\n  /** Associated locales (primary markets) */\n  locales: string[];\n}\n\nexport const currencyMetadata: Record<Currency, CurrencyMetadata> = {\n  MXN: {\n    code: 'MXN',\n    symbol: '$',\n    name: 'Mexican Peso',\n    decimals: 2,\n    symbolPosition: 'before',\n    locales: ['es-MX'],\n  },\n  USD: {\n    code: 'USD',\n    symbol: '$',\n    name: 'US Dollar',\n    decimals: 2,\n    symbolPosition: 'before',\n    locales: ['en-US'],\n  },\n  EUR: {\n    code: 'EUR',\n    symbol: '€',\n    name: 'Euro',\n    decimals: 2,\n    symbolPosition: 'after',\n    locales: ['es-ES', 'pt-PT'],\n  },\n} as const;\n\n// ═══════════════════════════════════════════════════════════════════════════════\n// CURRENCY UTILITIES\n// ═══════════════════════════════════════════════════════════════════════════════\n\n/**\n * Check if a string is a valid supported currency\n */\nexport function isValidCurrency(value: string): value is Currency {\n  return currencies.includes(value as Currency);\n}\n\n/**\n * Get currency from string with fallback\n */\nexport function parseCurrency(value: string | undefined | null): Currency {\n  if (value && isValidCurrency(value)) {\n    return value;\n  }\n  return fallbackCurrency;\n}\n\n/**\n * Get currency metadata with fallback\n */\nexport function getCurrencyMetadata(currency: string): CurrencyMetadata {\n  const validCurrency = parseCurrency(currency);\n  return currencyMetadata[validCurrency];\n}\n\n/**\n * Format a monetary amount according to currency rules\n */\nexport function formatCurrency(\n  amount: number,\n  currency: Currency,\n  options?: { showCode?: boolean }\n): string {\n  const meta = currencyMetadata[currency];\n  const formatted = amount.toFixed(meta.decimals);\n  const parts = formatted.split('.');\n\n  // Add thousands separator (using locale-appropriate separator)\n  const integerPart = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n  const decimalPart = parts[1];\n\n  const number = `${integerPart}.${decimalPart}`;\n\n  let result: string;\n  if (meta.symbolPosition === 'before') {\n    result = `${meta.symbol}${number}`;\n  } else {\n    result = `${number}${meta.symbol}`;\n  }\n\n  if (options?.showCode) {\n    result = `${result} ${currency}`;\n  }\n\n  return result;\n}\n"]}